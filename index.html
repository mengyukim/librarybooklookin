
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Booklookin Carousel (Dynamic)</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <style>
      body { margin: 0; }
    </style>
  </head>
  <body>
    <a-scene>

      <!-- Background skybox -->
      <a-sky src="lentssoccer360.jpg" rotation="0 -130 0"></a-sky>

      <!-- Static models -->
      <a-entity gltf-model="Allosaurus224.glb" position="-5 0 -3" scale="3 3 3" rotation="0 180 0"></a-entity>
      <a-entity gltf-model="Stone_Frog_Planter_0615062220_texture.glb" position="5 0 -3" scale="1.5 1.5 1.5" rotation="0 -45 0"></a-entity>

      <!-- Rotating carousel container -->
      <a-entity id="carousel" rotation="0 0 0"></a-entity>

      <!-- Camera and cursor -->
      <a-camera>
        <a-cursor fuse="false" raycaster="objects: .bookclick-target"></a-cursor>
      </a-camera>

    </a-scene>

    <script>
      // Book data: GLB filenames and optional Gutenberg links
      const books = [
        { id: "book1", file: "storiesoldandnew.glb", link: null },
        { id: "book2", file: "warandpeace220.glb", link: "https://gutenberg.org/cache/epub/2600/pg2600.txt" },
        { id: "book3", file: "Anne8Set.glb", link: "https://gutenberg.org/cache/epub/45/pg45.txt" },
        { id: "book4", file: "ozcellversion.glb", link: "https://gutenberg.org/cache/epub/43936/pg43936.txt" },
        { id: "book5", file: "CHN_341U_Course_Packe_0615052341_texture.glb", link: null },
        { id: "book6", file: "Pickwick220.glb", link: "https://gutenberg.org/cache/epub/580/pg580.txt" },
        { id: "book7", file: "Ulysses220.glb", link: "https://gutenberg.org/cache/epub/4300/pg4300.txt" }
      ];

      const carousel = document.getElementById('carousel');
      const radius = 5;

      books.forEach((book, i) => {
        const angle = (i / books.length) * Math.PI * 2;
        const x = radius * Math.cos(angle);
        const z = radius * Math.sin(angle);
        const y = 1.5;

        const el = document.createElement('a-entity');
        el.setAttribute('id', book.id);
        el.setAttribute('gltf-model', book.file);
        el.setAttribute('position', `${x} ${y} ${z}`);
        el.setAttribute('rotation', `0 ${-angle * (180/Math.PI) + 90} 0`);
        el.setAttribute('scale', '1 1 1');
        if (book.link) el.setAttribute('data-link', book.link);
        el.setAttribute('bookclickable', '');

        carousel.appendChild(el);
      });

      carousel.setAttribute('animation', 'property: rotation; to: 0 360 0; loop: true; dur: 60000');

      document.addEventListener('DOMContentLoaded', () => {
        document.querySelectorAll('.bookclick-target').forEach(el => {
          el.addEventListener('click', () => {
            const url = el.getAttribute('data-link');
            if (url) window.open(url, '_blank');
          });
        });
      });

      AFRAME.registerComponent('bookclickable', {
        init: function () {
          const el = this.el;
          const hitbox = document.createElement('a-box');
          hitbox.setAttribute('position', '0 1 0');
          hitbox.setAttribute('width', '1.5');
          hitbox.setAttribute('height', '2');
          hitbox.setAttribute('depth', '0.5');
          hitbox.setAttribute('opacity', '0');
          hitbox.setAttribute('class', 'bookclick-target');
          hitbox.setAttribute('data-link', el.getAttribute('data-link'));
          el.appendChild(hitbox);
        }
      });
    </script>
  </body>
</html>
